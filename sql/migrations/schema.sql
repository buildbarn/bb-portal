CREATE TABLE "actions" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "label" character varying NOT NULL, "type" character varying NULL, "success" boolean NULL, "exit_code" integer NULL, "command_line" jsonb NULL, "start_time" timestamptz NULL, "end_time" timestamptz NULL, "failure_code" character varying NULL, "failure_message" character varying NULL, "stdout_hash" character varying NULL, "stdout_size_bytes" bigint NULL, "stdout_hash_function" character varying NULL, "stderr_hash" character varying NULL, "stderr_size_bytes" bigint NULL, "stderr_hash_function" character varying NULL, "configuration_id" bigint NOT NULL, "bazel_invocation_id" bigint NOT NULL, PRIMARY KEY ("id"));
CREATE INDEX "action_label" ON "actions" ("label");
CREATE INDEX "action_bazel_invocation_id" ON "actions" ("bazel_invocation_id");
CREATE TABLE "action_cache_statistics" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "size_in_bytes" bigint NULL, "save_time_in_ms" bigint NULL, "load_time_in_ms" bigint NULL, "hits" integer NULL, "misses" integer NULL, "action_summary_action_cache_statistics" bigint NULL, PRIMARY KEY ("id"));
CREATE UNIQUE INDEX "action_cache_statistics_action_summary_action_cache_statistics_key" ON "action_cache_statistics" ("action_summary_action_cache_statistics");
CREATE INDEX "actioncachestatistics_action_summary_action_cache_statistics" ON "action_cache_statistics" ("action_summary_action_cache_statistics");
CREATE TABLE "action_data" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "mnemonic" character varying NULL, "actions_executed" bigint NULL, "actions_created" bigint NULL, "first_started_ms" bigint NULL, "last_ended_ms" bigint NULL, "system_time" bigint NULL, "user_time" bigint NULL, "action_summary_action_data" bigint NULL, PRIMARY KEY ("id"));
CREATE INDEX "actiondata_action_summary_action_data" ON "action_data" ("action_summary_action_data");
CREATE TABLE "action_summaries" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "actions_created" bigint NULL, "actions_created_not_including_aspects" bigint NULL, "actions_executed" bigint NULL, "remote_cache_hits" bigint NULL, "metrics_action_summary" bigint NULL, PRIMARY KEY ("id"));
CREATE UNIQUE INDEX "action_summaries_metrics_action_summary_key" ON "action_summaries" ("metrics_action_summary");
CREATE INDEX "actionsummary_metrics_action_summary" ON "action_summaries" ("metrics_action_summary");
CREATE TABLE "artifact_metrics" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "source_artifacts_read_size_in_bytes" bigint NULL, "source_artifacts_read_count" integer NULL, "output_artifacts_seen_size_in_bytes" bigint NULL, "output_artifacts_seen_count" integer NULL, "output_artifacts_from_action_cache_size_in_bytes" bigint NULL, "output_artifacts_from_action_cache_count" integer NULL, "top_level_artifacts_size_in_bytes" bigint NULL, "top_level_artifacts_count" integer NULL, "metrics_artifact_metrics" bigint NULL, PRIMARY KEY ("id"));
CREATE UNIQUE INDEX "artifact_metrics_metrics_artifact_metrics_key" ON "artifact_metrics" ("metrics_artifact_metrics");
CREATE INDEX "artifactmetrics_metrics_artifact_metrics" ON "artifact_metrics" ("metrics_artifact_metrics");
CREATE TABLE "authenticated_users" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "user_uuid" uuid NOT NULL, "external_id" character varying NOT NULL, "display_name" character varying NULL, "user_info" jsonb NULL, PRIMARY KEY ("id"));
CREATE UNIQUE INDEX "authenticated_users_user_uuid_key" ON "authenticated_users" ("user_uuid");
CREATE UNIQUE INDEX "authenticated_users_external_id_key" ON "authenticated_users" ("external_id");
CREATE INDEX "authenticateduser_user_uuid" ON "authenticated_users" ("user_uuid");
CREATE TABLE "bazel_invocations" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "invocation_id" uuid NOT NULL, "started_at" timestamptz NULL, "ended_at" timestamptz NULL, "change_number" bigint NULL, "patchset_number" bigint NULL, "bep_completed" boolean NOT NULL DEFAULT false, "step_label" character varying NULL, "user_email" character varying NULL, "user_ldap" character varying NULL, "hostname" character varying NULL, "is_ci_worker" boolean NULL, "num_fetches" bigint NULL, "profile_name" character varying NULL, "bazel_version" character varying NULL, "exit_code_name" character varying NULL, "exit_code_code" integer NULL, "command_line_command" character varying NULL, "command_line_executable" character varying NULL, "command_line_residual" character varying NULL, "command_line" jsonb NULL, "explicit_command_line" jsonb NULL, "startup_options" jsonb NULL, "explicit_startup_options" jsonb NULL, "processed_event_started" boolean NOT NULL DEFAULT false, "processed_event_build_metadata" boolean NOT NULL DEFAULT false, "processed_event_options_parsed" boolean NOT NULL DEFAULT false, "processed_event_build_finished" boolean NOT NULL DEFAULT false, "processed_event_structured_command_line" boolean NOT NULL DEFAULT false, "processed_event_workspace_status" boolean NOT NULL DEFAULT false, "authenticated_user_bazel_invocations" bigint NULL, "build_invocations" bigint NULL, "instance_name_bazel_invocations" bigint NOT NULL, PRIMARY KEY ("id"));
CREATE UNIQUE INDEX "bazel_invocations_invocation_id_key" ON "bazel_invocations" ("invocation_id");
CREATE INDEX "bazelinvocation_invocation_id" ON "bazel_invocations" ("invocation_id");
CREATE INDEX "bazelinvocation_started_at" ON "bazel_invocations" ("started_at");
CREATE INDEX "bazelinvocation_build_invocations" ON "bazel_invocations" ("build_invocations");
CREATE INDEX "bazelinvocation_instance_name_bazel_invocations" ON "bazel_invocations" ("instance_name_bazel_invocations");
CREATE TABLE "bazel_invocation_problems" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "problem_type" character varying NOT NULL, "label" character varying NOT NULL, "bep_events" jsonb NOT NULL, "bazel_invocation_problems" bigint NULL, PRIMARY KEY ("id"));
CREATE INDEX "bazelinvocationproblem_bazel_invocation_problems" ON "bazel_invocation_problems" ("bazel_invocation_problems");
CREATE TABLE "blobs" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "uri" character varying NOT NULL, "size_bytes" bigint NULL, "archiving_status" character varying NOT NULL DEFAULT 'QUEUED', "reason" character varying NULL, "archive_url" character varying NULL, "instance_name_blobs" bigint NOT NULL, PRIMARY KEY ("id"));
CREATE UNIQUE INDEX "blobs_uri_key" ON "blobs" ("uri");
CREATE TABLE "builds" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "build_url" character varying NOT NULL, "build_uuid" uuid NOT NULL, "timestamp" timestamptz NOT NULL, "instance_name_builds" bigint NOT NULL, PRIMARY KEY ("id"));
CREATE UNIQUE INDEX "builds_build_uuid_key" ON "builds" ("build_uuid");
CREATE INDEX "build_build_uuid" ON "builds" ("build_uuid");
CREATE INDEX "build_build_url" ON "builds" ("build_url");
CREATE INDEX "build_timestamp" ON "builds" ("timestamp");
CREATE UNIQUE INDEX "build_build_url_instance_name_builds" ON "builds" ("build_url", "instance_name_builds");
CREATE TABLE "build_graph_metrics" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "action_lookup_value_count" integer NULL, "action_lookup_value_count_not_including_aspects" integer NULL, "action_count" integer NULL, "action_count_not_including_aspects" integer NULL, "input_file_configured_target_count" integer NULL, "output_file_configured_target_count" integer NULL, "other_configured_target_count" integer NULL, "output_artifact_count" integer NULL, "post_invocation_skyframe_node_count" integer NULL, "build_graph_metrics_dirtied_values" bigint NULL, "build_graph_metrics_changed_values" bigint NULL, "build_graph_metrics_built_values" bigint NULL, "build_graph_metrics_cleaned_values" bigint NULL, "metrics_build_graph_metrics" bigint NULL, PRIMARY KEY ("id"));
CREATE UNIQUE INDEX "build_graph_metrics_metrics_build_graph_metrics_key" ON "build_graph_metrics" ("metrics_build_graph_metrics");
CREATE INDEX "buildgraphmetrics_metrics_build_graph_metrics" ON "build_graph_metrics" ("metrics_build_graph_metrics");
CREATE TABLE "build_log_chunks" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "data" bytea NOT NULL, "chunk_index" bigint NOT NULL, "first_line_index" bigint NOT NULL, "last_line_index" bigint NOT NULL, "bazel_invocation_build_log_chunks" bigint NOT NULL, PRIMARY KEY ("id"));
CREATE UNIQUE INDEX "buildlogchunk_chunk_index_bazel_invocation_build_log_chunks" ON "build_log_chunks" ("chunk_index", "bazel_invocation_build_log_chunks");
CREATE TABLE "configurations" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "configuration_id" character varying NOT NULL, "mnemonic" character varying NULL, "platform_name" character varying NULL, "cpu" character varying NULL, "make_variables" jsonb NULL, "is_tool" boolean NULL, "bazel_invocation_id" bigint NOT NULL, PRIMARY KEY ("id"));
CREATE INDEX "configuration_configuration_id" ON "configurations" ("configuration_id");
CREATE INDEX "configuration_bazel_invocation_id" ON "configurations" ("bazel_invocation_id");
CREATE UNIQUE INDEX "configuration_configuration_id_bazel_invocation_id" ON "configurations" ("configuration_id", "bazel_invocation_id");
CREATE TABLE "connection_metadata" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "connection_last_open_at" timestamptz NOT NULL, "bazel_invocation_connection_metadata" bigint NOT NULL, PRIMARY KEY ("id"));
CREATE UNIQUE INDEX "connectionmetadata_bazel_invocation_connection_metadata" ON "connection_metadata" ("bazel_invocation_connection_metadata");
CREATE TABLE "cumulative_metrics" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "num_analyses" integer NULL, "num_builds" integer NULL, "metrics_cumulative_metrics" bigint NULL, PRIMARY KEY ("id"));
CREATE UNIQUE INDEX "cumulative_metrics_metrics_cumulative_metrics_key" ON "cumulative_metrics" ("metrics_cumulative_metrics");
CREATE INDEX "cumulativemetrics_metrics_cumulative_metrics" ON "cumulative_metrics" ("metrics_cumulative_metrics");
CREATE TABLE "evaluation_stats" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "skyfunction_name" character varying NULL, "count" bigint NULL, "build_graph_metrics_evaluated_values" bigint NULL, PRIMARY KEY ("id"));
CREATE UNIQUE INDEX "evaluation_stats_build_graph_metrics_evaluated_values_key" ON "evaluation_stats" ("build_graph_metrics_evaluated_values");
CREATE TABLE "event_metadata" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "handled" bytea NOT NULL, "event_received_at" timestamptz NOT NULL, "version" bigint NOT NULL, "bazel_invocation_id" bigint NOT NULL, PRIMARY KEY ("id"));
CREATE UNIQUE INDEX "event_metadata_bazel_invocation_id_key" ON "event_metadata" ("bazel_invocation_id");
CREATE INDEX "eventmetadata_event_received_at" ON "event_metadata" ("event_received_at");
CREATE TABLE "garbage_metrics" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "type" character varying NULL, "garbage_collected" bigint NULL, "memory_metrics_garbage_metrics" bigint NULL, PRIMARY KEY ("id"));
CREATE INDEX "garbagemetrics_memory_metrics_garbage_metrics" ON "garbage_metrics" ("memory_metrics_garbage_metrics");
CREATE TABLE "incomplete_build_logs" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "snippet_id" integer NOT NULL, "log_snippet" bytea NOT NULL, "bazel_invocation_id" bigint NOT NULL, PRIMARY KEY ("id"));
CREATE INDEX "incompletebuildlog_bazel_invocation_id" ON "incomplete_build_logs" ("bazel_invocation_id");
CREATE UNIQUE INDEX "incompletebuildlog_snippet_id_bazel_invocation_id" ON "incomplete_build_logs" ("snippet_id", "bazel_invocation_id");
CREATE TABLE "instance_names" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "name" character varying NOT NULL, PRIMARY KEY ("id"));
CREATE UNIQUE INDEX "instance_names_name_key" ON "instance_names" ("name");
CREATE TABLE "invocation_files" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "name" character varying NOT NULL, "content" character varying NULL, "digest" character varying NULL, "size_bytes" bigint NULL, "digest_function" character varying NULL, "bazel_invocation_invocation_files" bigint NULL, PRIMARY KEY ("id"));
CREATE INDEX "invocationfiles_bazel_invocation_invocation_files" ON "invocation_files" ("bazel_invocation_invocation_files");
CREATE UNIQUE INDEX "invocationfiles_name_bazel_invocation_invocation_files" ON "invocation_files" ("name", "bazel_invocation_invocation_files");
CREATE TABLE "invocation_targets" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "success" boolean NOT NULL DEFAULT false, "tags" jsonb NULL, "start_time_in_ms" bigint NULL, "end_time_in_ms" bigint NULL, "duration_in_ms" bigint NULL, "failure_message" character varying NULL, "abort_reason" character varying NOT NULL, "bazel_invocation_invocation_targets" bigint NOT NULL, "invocation_target_configuration" bigint NULL, "target_invocation_targets" bigint NOT NULL, PRIMARY KEY ("id"));
CREATE INDEX "invocationtarget_bazel_invocation_invocation_targets" ON "invocation_targets" ("bazel_invocation_invocation_targets");
CREATE INDEX "invocationtarget_target_invocation_targets" ON "invocation_targets" ("target_invocation_targets");
CREATE INDEX "invocationtarget_invocation_target_configuration" ON "invocation_targets" ("invocation_target_configuration");
CREATE INDEX "invocationtarget_bazel_invocat_5381aaf3e039af517e1ccabd062a5d9b" ON "invocation_targets" ("bazel_invocation_invocation_targets", "target_invocation_targets", "invocation_target_configuration");
CREATE TABLE "memory_metrics" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "peak_post_gc_heap_size" bigint NULL, "used_heap_size_post_build" bigint NULL, "peak_post_gc_tenured_space_heap_size" bigint NULL, "metrics_memory_metrics" bigint NULL, PRIMARY KEY ("id"));
CREATE UNIQUE INDEX "memory_metrics_metrics_memory_metrics_key" ON "memory_metrics" ("metrics_memory_metrics");
CREATE INDEX "memorymetrics_metrics_memory_metrics" ON "memory_metrics" ("metrics_memory_metrics");
CREATE TABLE "metrics" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "bazel_invocation_metrics" bigint NULL, PRIMARY KEY ("id"));
CREATE UNIQUE INDEX "metrics_bazel_invocation_metrics_key" ON "metrics" ("bazel_invocation_metrics");
CREATE INDEX "metrics_bazel_invocation_metrics" ON "metrics" ("bazel_invocation_metrics");
CREATE TABLE "miss_details" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "reason" character varying NOT NULL, "count" integer NULL, "action_cache_statistics_miss_details" bigint NULL, PRIMARY KEY ("id"));
CREATE INDEX "missdetail_action_cache_statistics_miss_details" ON "miss_details" ("action_cache_statistics_miss_details");
CREATE TABLE "network_metrics" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "metrics_network_metrics" bigint NULL, PRIMARY KEY ("id"));
CREATE UNIQUE INDEX "network_metrics_metrics_network_metrics_key" ON "network_metrics" ("metrics_network_metrics");
CREATE INDEX "networkmetrics_metrics_network_metrics" ON "network_metrics" ("metrics_network_metrics");
CREATE TABLE "package_load_metrics" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "name" character varying NULL, "load_duration" bigint NULL, "num_targets" bigint NULL, "computation_steps" bigint NULL, "num_transitive_loads" bigint NULL, "package_overhead" bigint NULL, "package_metrics_package_load_metrics" bigint NULL, PRIMARY KEY ("id"));
CREATE INDEX "packageloadmetrics_package_metrics_package_load_metrics" ON "package_load_metrics" ("package_metrics_package_load_metrics");
CREATE TABLE "package_metrics" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "packages_loaded" bigint NULL, "metrics_package_metrics" bigint NULL, PRIMARY KEY ("id"));
CREATE UNIQUE INDEX "package_metrics_metrics_package_metrics_key" ON "package_metrics" ("metrics_package_metrics");
CREATE INDEX "packagemetrics_metrics_package_metrics" ON "package_metrics" ("metrics_package_metrics");
CREATE TABLE "runner_counts" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "name" character varying NULL, "exec_kind" character varying NULL, "actions_executed" bigint NULL, "action_summary_runner_count" bigint NULL, PRIMARY KEY ("id"));
CREATE INDEX "runnercount_action_summary_runner_count" ON "runner_counts" ("action_summary_runner_count");
CREATE TABLE "source_controls" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "provider" character varying NULL, "instance_url" character varying NULL, "repo" character varying NULL, "refs" character varying NULL, "commit_sha" character varying NULL, "actor" character varying NULL, "event_name" character varying NULL, "workflow" character varying NULL, "run_id" character varying NULL, "run_number" character varying NULL, "job" character varying NULL, "action" character varying NULL, "runner_name" character varying NULL, "runner_arch" character varying NULL, "runner_os" character varying NULL, "workspace" character varying NULL, "bazel_invocation_source_control" bigint NULL, PRIMARY KEY ("id"));
CREATE UNIQUE INDEX "source_controls_bazel_invocation_source_control_key" ON "source_controls" ("bazel_invocation_source_control");
CREATE INDEX "sourcecontrol_bazel_invocation_source_control" ON "source_controls" ("bazel_invocation_source_control");
CREATE TABLE "system_network_stats" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "bytes_sent" bigint NULL, "bytes_recv" bigint NULL, "packets_sent" bigint NULL, "packets_recv" bigint NULL, "peak_bytes_sent_per_sec" bigint NULL, "peak_bytes_recv_per_sec" bigint NULL, "peak_packets_sent_per_sec" bigint NULL, "peak_packets_recv_per_sec" bigint NULL, "network_metrics_system_network_stats" bigint NULL, PRIMARY KEY ("id"));
CREATE UNIQUE INDEX "system_network_stats_network_metrics_system_network_stats_key" ON "system_network_stats" ("network_metrics_system_network_stats");
CREATE INDEX "systemnetworkstats_network_metrics_system_network_stats" ON "system_network_stats" ("network_metrics_system_network_stats");
CREATE TABLE "targets" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "label" character varying NOT NULL, "aspect" character varying NOT NULL, "target_kind" character varying NOT NULL, "instance_name_targets" bigint NOT NULL, PRIMARY KEY ("id"));
CREATE INDEX "target_instance_name_targets" ON "targets" ("instance_name_targets");
CREATE INDEX "target_label_aspect" ON "targets" ("label", "aspect");
CREATE INDEX "target_label_aspect_instance_name_targets" ON "targets" ("label", "aspect", "instance_name_targets");
CREATE UNIQUE INDEX "target_label_aspect_target_kind_instance_name_targets" ON "targets" ("label", "aspect", "target_kind", "instance_name_targets");
CREATE TABLE "target_kind_mappings" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "start_time_in_ms" bigint NULL, "bazel_invocation_id" bigint NOT NULL, "target_id" bigint NOT NULL, PRIMARY KEY ("id"));
CREATE INDEX "targetkindmapping_bazel_invocation_id" ON "target_kind_mappings" ("bazel_invocation_id");
CREATE INDEX "targetkindmapping_target_id" ON "target_kind_mappings" ("target_id");
CREATE UNIQUE INDEX "targetkindmapping_bazel_invocation_id_target_id" ON "target_kind_mappings" ("bazel_invocation_id", "target_id");
CREATE TABLE "target_metrics" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "targets_loaded" bigint NULL, "targets_configured" bigint NULL, "targets_configured_not_including_aspects" bigint NULL, "metrics_target_metrics" bigint NULL, PRIMARY KEY ("id"));
CREATE UNIQUE INDEX "target_metrics_metrics_target_metrics_key" ON "target_metrics" ("metrics_target_metrics");
CREATE INDEX "targetmetrics_metrics_target_metrics" ON "target_metrics" ("metrics_target_metrics");
CREATE TABLE "test_results" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "run" integer NOT NULL, "shard" integer NOT NULL, "attempt" integer NOT NULL, "status" character varying NULL, "status_details" character varying NULL, "cached_locally" boolean NULL, "test_attempt_start" timestamptz NULL, "test_attempt_duration_in_ms" bigint NULL, "warning" jsonb NULL, "strategy" character varying NULL, "cached_remotely" boolean NULL, "exit_code" integer NULL, "hostname" character varying NULL, "timing_breakdown" jsonb NULL, "test_summary_test_results" bigint NOT NULL, PRIMARY KEY ("id"));
CREATE INDEX "testresult_test_summary_test_results" ON "test_results" ("test_summary_test_results");
CREATE TABLE "test_summaries" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "overall_status" character varying NULL, "total_run_count" integer NULL, "run_count" integer NULL, "attempt_count" integer NULL, "shard_count" integer NULL, "total_num_cached" integer NULL, "first_start_time" timestamptz NULL, "last_stop_time" timestamptz NULL, "total_run_duration_in_ms" bigint NULL, "invocation_target_test_summary" bigint NOT NULL, PRIMARY KEY ("id"));
CREATE INDEX "testsummary_invocation_target_test_summary" ON "test_summaries" ("invocation_target_test_summary");
CREATE TABLE "timing_metrics" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "cpu_time_in_ms" bigint NULL, "wall_time_in_ms" bigint NULL, "analysis_phase_time_in_ms" bigint NULL, "execution_phase_time_in_ms" bigint NULL, "actions_execution_start_in_ms" bigint NULL, "metrics_timing_metrics" bigint NULL, PRIMARY KEY ("id"));
CREATE UNIQUE INDEX "timing_metrics_metrics_timing_metrics_key" ON "timing_metrics" ("metrics_timing_metrics");
CREATE INDEX "timingmetrics_metrics_timing_metrics" ON "timing_metrics" ("metrics_timing_metrics");
ALTER TABLE "actions" ADD CONSTRAINT "actions_configurations_configuration" FOREIGN KEY ("configuration_id") REFERENCES "configurations" ("id") ON DELETE NO ACTION, ADD CONSTRAINT "actions_bazel_invocations_actions" FOREIGN KEY ("bazel_invocation_id") REFERENCES "bazel_invocations" ("id") ON DELETE CASCADE;
ALTER TABLE "action_cache_statistics" ADD CONSTRAINT "action_cache_statistics_action_bd6d4e03811a51ff84e18d7e5a250d21" FOREIGN KEY ("action_summary_action_cache_statistics") REFERENCES "action_summaries" ("id") ON DELETE CASCADE;
ALTER TABLE "action_data" ADD CONSTRAINT "action_data_action_summaries_action_data" FOREIGN KEY ("action_summary_action_data") REFERENCES "action_summaries" ("id") ON DELETE CASCADE;
ALTER TABLE "action_summaries" ADD CONSTRAINT "action_summaries_metrics_action_summary" FOREIGN KEY ("metrics_action_summary") REFERENCES "metrics" ("id") ON DELETE CASCADE;
ALTER TABLE "artifact_metrics" ADD CONSTRAINT "artifact_metrics_metrics_artifact_metrics" FOREIGN KEY ("metrics_artifact_metrics") REFERENCES "metrics" ("id") ON DELETE CASCADE;
ALTER TABLE "bazel_invocations" ADD CONSTRAINT "bazel_invocations_authenticated_users_bazel_invocations" FOREIGN KEY ("authenticated_user_bazel_invocations") REFERENCES "authenticated_users" ("id") ON DELETE SET NULL, ADD CONSTRAINT "bazel_invocations_builds_invocations" FOREIGN KEY ("build_invocations") REFERENCES "builds" ("id") ON DELETE CASCADE, ADD CONSTRAINT "bazel_invocations_instance_names_bazel_invocations" FOREIGN KEY ("instance_name_bazel_invocations") REFERENCES "instance_names" ("id") ON DELETE NO ACTION;
ALTER TABLE "bazel_invocation_problems" ADD CONSTRAINT "bazel_invocation_problems_bazel_invocations_problems" FOREIGN KEY ("bazel_invocation_problems") REFERENCES "bazel_invocations" ("id") ON DELETE CASCADE;
ALTER TABLE "blobs" ADD CONSTRAINT "blobs_instance_names_blobs" FOREIGN KEY ("instance_name_blobs") REFERENCES "instance_names" ("id") ON DELETE NO ACTION;
ALTER TABLE "builds" ADD CONSTRAINT "builds_instance_names_builds" FOREIGN KEY ("instance_name_builds") REFERENCES "instance_names" ("id") ON DELETE NO ACTION;
ALTER TABLE "build_graph_metrics" ADD CONSTRAINT "build_graph_metrics_evaluation_stats_dirtied_values" FOREIGN KEY ("build_graph_metrics_dirtied_values") REFERENCES "evaluation_stats" ("id") ON DELETE CASCADE, ADD CONSTRAINT "build_graph_metrics_evaluation_stats_changed_values" FOREIGN KEY ("build_graph_metrics_changed_values") REFERENCES "evaluation_stats" ("id") ON DELETE CASCADE, ADD CONSTRAINT "build_graph_metrics_evaluation_stats_built_values" FOREIGN KEY ("build_graph_metrics_built_values") REFERENCES "evaluation_stats" ("id") ON DELETE CASCADE, ADD CONSTRAINT "build_graph_metrics_evaluation_stats_cleaned_values" FOREIGN KEY ("build_graph_metrics_cleaned_values") REFERENCES "evaluation_stats" ("id") ON DELETE CASCADE, ADD CONSTRAINT "build_graph_metrics_metrics_build_graph_metrics" FOREIGN KEY ("metrics_build_graph_metrics") REFERENCES "metrics" ("id") ON DELETE CASCADE;
ALTER TABLE "build_log_chunks" ADD CONSTRAINT "build_log_chunks_bazel_invocations_build_log_chunks" FOREIGN KEY ("bazel_invocation_build_log_chunks") REFERENCES "bazel_invocations" ("id") ON DELETE CASCADE;
ALTER TABLE "configurations" ADD CONSTRAINT "configurations_bazel_invocations_configurations" FOREIGN KEY ("bazel_invocation_id") REFERENCES "bazel_invocations" ("id") ON DELETE CASCADE;
ALTER TABLE "connection_metadata" ADD CONSTRAINT "connection_metadata_bazel_invocations_connection_metadata" FOREIGN KEY ("bazel_invocation_connection_metadata") REFERENCES "bazel_invocations" ("id") ON DELETE CASCADE;
ALTER TABLE "cumulative_metrics" ADD CONSTRAINT "cumulative_metrics_metrics_cumulative_metrics" FOREIGN KEY ("metrics_cumulative_metrics") REFERENCES "metrics" ("id") ON DELETE CASCADE;
ALTER TABLE "evaluation_stats" ADD CONSTRAINT "evaluation_stats_build_graph_metrics_evaluated_values" FOREIGN KEY ("build_graph_metrics_evaluated_values") REFERENCES "build_graph_metrics" ("id") ON DELETE CASCADE;
ALTER TABLE "event_metadata" ADD CONSTRAINT "event_metadata_bazel_invocations_event_metadata" FOREIGN KEY ("bazel_invocation_id") REFERENCES "bazel_invocations" ("id") ON DELETE CASCADE;
ALTER TABLE "garbage_metrics" ADD CONSTRAINT "garbage_metrics_memory_metrics_garbage_metrics" FOREIGN KEY ("memory_metrics_garbage_metrics") REFERENCES "memory_metrics" ("id") ON DELETE CASCADE;
ALTER TABLE "incomplete_build_logs" ADD CONSTRAINT "incomplete_build_logs_bazel_invocations_incomplete_build_logs" FOREIGN KEY ("bazel_invocation_id") REFERENCES "bazel_invocations" ("id") ON DELETE CASCADE;
ALTER TABLE "invocation_files" ADD CONSTRAINT "invocation_files_bazel_invocations_invocation_files" FOREIGN KEY ("bazel_invocation_invocation_files") REFERENCES "bazel_invocations" ("id") ON DELETE CASCADE;
ALTER TABLE "invocation_targets" ADD CONSTRAINT "invocation_targets_bazel_invocations_invocation_targets" FOREIGN KEY ("bazel_invocation_invocation_targets") REFERENCES "bazel_invocations" ("id") ON DELETE CASCADE, ADD CONSTRAINT "invocation_targets_configurations_configuration" FOREIGN KEY ("invocation_target_configuration") REFERENCES "configurations" ("id") ON DELETE SET NULL, ADD CONSTRAINT "invocation_targets_targets_invocation_targets" FOREIGN KEY ("target_invocation_targets") REFERENCES "targets" ("id") ON DELETE CASCADE;
ALTER TABLE "memory_metrics" ADD CONSTRAINT "memory_metrics_metrics_memory_metrics" FOREIGN KEY ("metrics_memory_metrics") REFERENCES "metrics" ("id") ON DELETE CASCADE;
ALTER TABLE "metrics" ADD CONSTRAINT "metrics_bazel_invocations_metrics" FOREIGN KEY ("bazel_invocation_metrics") REFERENCES "bazel_invocations" ("id") ON DELETE CASCADE;
ALTER TABLE "miss_details" ADD CONSTRAINT "miss_details_action_cache_statistics_miss_details" FOREIGN KEY ("action_cache_statistics_miss_details") REFERENCES "action_cache_statistics" ("id") ON DELETE CASCADE;
ALTER TABLE "network_metrics" ADD CONSTRAINT "network_metrics_metrics_network_metrics" FOREIGN KEY ("metrics_network_metrics") REFERENCES "metrics" ("id") ON DELETE CASCADE;
ALTER TABLE "package_load_metrics" ADD CONSTRAINT "package_load_metrics_package_metrics_package_load_metrics" FOREIGN KEY ("package_metrics_package_load_metrics") REFERENCES "package_metrics" ("id") ON DELETE CASCADE;
ALTER TABLE "package_metrics" ADD CONSTRAINT "package_metrics_metrics_package_metrics" FOREIGN KEY ("metrics_package_metrics") REFERENCES "metrics" ("id") ON DELETE CASCADE;
ALTER TABLE "runner_counts" ADD CONSTRAINT "runner_counts_action_summaries_runner_count" FOREIGN KEY ("action_summary_runner_count") REFERENCES "action_summaries" ("id") ON DELETE CASCADE;
ALTER TABLE "source_controls" ADD CONSTRAINT "source_controls_bazel_invocations_source_control" FOREIGN KEY ("bazel_invocation_source_control") REFERENCES "bazel_invocations" ("id") ON DELETE CASCADE;
ALTER TABLE "system_network_stats" ADD CONSTRAINT "system_network_stats_network_metrics_system_network_stats" FOREIGN KEY ("network_metrics_system_network_stats") REFERENCES "network_metrics" ("id") ON DELETE CASCADE;
ALTER TABLE "targets" ADD CONSTRAINT "targets_instance_names_targets" FOREIGN KEY ("instance_name_targets") REFERENCES "instance_names" ("id") ON DELETE NO ACTION;
ALTER TABLE "target_kind_mappings" ADD CONSTRAINT "target_kind_mappings_bazel_invocations_target_kind_mappings" FOREIGN KEY ("bazel_invocation_id") REFERENCES "bazel_invocations" ("id") ON DELETE CASCADE, ADD CONSTRAINT "target_kind_mappings_targets_target_kind_mappings" FOREIGN KEY ("target_id") REFERENCES "targets" ("id") ON DELETE CASCADE;
ALTER TABLE "target_metrics" ADD CONSTRAINT "target_metrics_metrics_target_metrics" FOREIGN KEY ("metrics_target_metrics") REFERENCES "metrics" ("id") ON DELETE CASCADE;
ALTER TABLE "test_results" ADD CONSTRAINT "test_results_test_summaries_test_results" FOREIGN KEY ("test_summary_test_results") REFERENCES "test_summaries" ("id") ON DELETE CASCADE;
ALTER TABLE "test_summaries" ADD CONSTRAINT "test_summaries_invocation_targets_test_summary" FOREIGN KEY ("invocation_target_test_summary") REFERENCES "invocation_targets" ("id") ON DELETE CASCADE;
ALTER TABLE "timing_metrics" ADD CONSTRAINT "timing_metrics_metrics_timing_metrics" FOREIGN KEY ("metrics_timing_metrics") REFERENCES "metrics" ("id") ON DELETE CASCADE;
